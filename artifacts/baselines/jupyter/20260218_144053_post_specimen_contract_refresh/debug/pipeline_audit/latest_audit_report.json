{
  "run_id": "20260217_014646",
  "generated_utc": "2026-02-17T02:25:47.717344+00:00",
  "strictness": "fail_on_key_anomalies",
  "status": "warning",
  "summary": {
    "p0_count": 0,
    "p1_count": 0,
    "p2_count": 1,
    "total_findings": 1
  },
  "manifest": {
    "run_id": "20260217_014646",
    "generated_utc": "2026-02-17T01:46:46.688198+00:00",
    "work_dir": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP",
    "python_version": "3.11.10 (main, Oct 16 2024, 08:56:36) [Clang 18.1.8 ]",
    "uv_version": "uv 0.9.28 (Homebrew 2026-01-29)",
    "git": {
      "branch": "main",
      "commit": "4305b1efb4f9cadbff5019af8a0b0002eb185eb8",
      "dirty": true
    },
    "package_versions": {
      "pandas": "2.2.2",
      "numpy": "2.3.5",
      "spacy": "3.8.11",
      "torch": "2.10.0",
      "sentence-transformers": "5.2.2"
    },
    "env_knobs": {
      "WORK_DIR": "<unset>",
      "CLASSIFIER_INPUT_FILENAME": "<unset>",
      "RATER_NLP_INPUT_FILENAME": "<unset>",
      "RATER_ANNOTATION_PATH": "<unset>",
      "ANALYSIS_INPUT_FILENAME": "<unset>",
      "BQ_QUERY_TIMEOUT_SECS": "<unset>",
      "WRITE_ARCHIVE_XLSX_EXPORTS": "<unset>",
      "COHORT_FAIL_ON_ALL_OTHER_SOURCE": "<unset>",
      "COHORT_WARN_OTHER_RATE": "<unset>",
      "COHORT_FAIL_OTHER_RATE": "<unset>",
      "COHORT_GAS_SOURCE_INFERENCE_MODE": "<unset>",
      "COHORT_FAIL_ON_OMR_ATTACH_INCONSISTENCY": "<unset>",
      "COHORT_ALLOW_EMPTY_OMR": "<unset>",
      "COHORT_ANTHRO_MIN_BMI_COVERAGE": "<unset>",
      "RUN_MANIFEST_STAGE_SCOPE": "<unset>",
      "GOOGLE_APPLICATION_CREDENTIALS": "<unset>",
      "HF_TOKEN": "<unset>"
    },
    "pipeline_mode": "quarto"
  },
  "baseline": {
    "baseline_mode": "latest",
    "baseline_date": "2026-02-16",
    "metrics": {
      "cohort_rows": 41322.0,
      "classifier_rows": 41322.0,
      "gas_source_other_rate": 0.7711144274014472,
      "first_other_pco2_pct_eq_160_poc": 0.1367172642716365,
      "icu_link_rate": 0.770908827366285,
      "pct_any_gas_0_6h": 0.37821906556505774,
      "pct_any_gas_0_24h": 0.9468280427115041
    },
    "sources": {
      "cohort_rows": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/prior runs/2026-02-16 MIMICIV all with CC.xlsx",
      "classifier_rows": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/prior runs/2026-02-16 MIMICIV all with CC_with_NLP.xlsx",
      "gas_source_other_rate": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/prior runs/2026-02-16 gas_source_audit.json",
      "first_other_pco2_pct_eq_160_poc": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/prior runs/2026-02-16 first_other_pco2_audit.csv",
      "icu_link_rate": "pre_run_qa_summary.json",
      "pct_any_gas_0_6h": "pre_run_qa_summary.json",
      "pct_any_gas_0_24h": "pre_run_qa_summary.json"
    }
  },
  "pipeline_run": {
    "started_utc": "2026-02-17T01:46:49.238488+00:00",
    "ended_utc": "2026-02-17T02:22:21.820555+00:00",
    "duration_s": 2132.582067,
    "success": true,
    "stages": [
      {
        "command": "make quarto-cohort",
        "returncode": 0,
        "started_utc": "2026-02-17T01:46:49.238520+00:00",
        "ended_utc": "2026-02-17T02:06:48.992046+00:00",
        "duration_s": 1199.753526,
        "line_count": 138,
        "log_path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/debug/pipeline_audit/20260217_014646/logs/01_cohort.log",
        "stage_id": "01_cohort",
        "status": "ok"
      },
      {
        "command": "make quarto-classifier",
        "returncode": 0,
        "started_utc": "2026-02-17T02:06:49.024601+00:00",
        "ended_utc": "2026-02-17T02:16:16.482402+00:00",
        "duration_s": 567.457801,
        "line_count": 88,
        "log_path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/debug/pipeline_audit/20260217_014646/logs/02_classifier.log",
        "stage_id": "02_classifier",
        "status": "ok"
      },
      {
        "command": "make quarto-rater",
        "returncode": 0,
        "started_utc": "2026-02-17T02:16:16.498265+00:00",
        "ended_utc": "2026-02-17T02:19:21.108636+00:00",
        "duration_s": 184.610371,
        "line_count": 105,
        "log_path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/debug/pipeline_audit/20260217_014646/logs/03_rater.log",
        "stage_id": "03_rater",
        "status": "ok"
      },
      {
        "command": "make quarto-analysis",
        "returncode": 0,
        "started_utc": "2026-02-17T02:19:21.110961+00:00",
        "ended_utc": "2026-02-17T02:22:21.818928+00:00",
        "duration_s": 180.707967,
        "line_count": 113,
        "log_path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/debug/pipeline_audit/20260217_014646/logs/04_analysis.log",
        "stage_id": "04_analysis",
        "status": "ok"
      }
    ]
  },
  "artifact_checks": {
    "cohort_workbook": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/MIMICIV all with CC.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 43162173,
      "mtime_utc": "2026-02-17T02:04:33.755871+00:00"
    },
    "classifier_workbook": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/MIMIC tabular data/MIMICIV all with CC_with_NLP.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 52260655,
      "mtime_utc": "2026-02-17T02:12:16.689366+00:00"
    },
    "qa_summary": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/qa_summary.json",
      "exists": true,
      "fresh": true,
      "size_bytes": 22083,
      "mtime_utc": "2026-02-17T01:57:15.459808+00:00"
    },
    "rater_join_audit": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/annotation_agreement_outputs_nlp/R3_vs_NLP_join_audit.json",
      "exists": true,
      "fresh": true,
      "size_bytes": 394,
      "mtime_utc": "2026-02-17T02:17:22.304886+00:00"
    },
    "rater_summary": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/annotation_agreement_outputs_nlp/R3_vs_NLP_summary.txt",
      "exists": true,
      "fresh": true,
      "size_bytes": 1293,
      "mtime_utc": "2026-02-17T02:17:22.550878+00:00"
    },
    "analysis_export_1": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/Symptom_Composition_by_Hypercapnia_Definition.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 6923,
      "mtime_utc": "2026-02-17T02:20:25.099387+00:00"
    },
    "analysis_export_2": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/Symptom_Composition_Pivot_ChartReady.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 5484,
      "mtime_utc": "2026-02-17T02:20:25.102932+00:00"
    },
    "analysis_export_3": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/Symptom_Composition_by_ABG_VBG_Overlap.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 5372,
      "mtime_utc": "2026-02-17T02:20:26.157991+00:00"
    },
    "analysis_export_4": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/Symptom_Composition_by_Gas_Source_Overlap.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 5530,
      "mtime_utc": "2026-02-17T02:20:26.162786+00:00"
    },
    "analysis_export_5": {
      "path": "/Users/blocke/Box Sync/Residency Personal Files/Scholarly Work/Locke Research Projects/Hypercap-CC-NLP/Symptom_Composition_by_ICD_Gas_Overlap.xlsx",
      "exists": true,
      "fresh": true,
      "size_bytes": 5365,
      "mtime_utc": "2026-02-17T02:20:26.166138+00:00"
    }
  },
  "current_metrics": {
    "cohort_rows": 41322.0,
    "classifier_rows": 41322.0,
    "icu_link_rate": 0.770908827366285,
    "pct_any_gas_0_6h": 0.37821906556505774,
    "pct_any_gas_0_24h": 0.9468280427115041,
    "gas_source_other_rate": 0.7711144274014472,
    "first_other_pco2_pct_eq_160_poc": 0.1367172643
  },
  "metric_drift": [
    {
      "metric": "classifier_rows",
      "current_value": 41322.0,
      "baseline_value": 41322.0,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "relative",
      "warn_threshold": 0.05,
      "fail_threshold": 0.1,
      "severity": "ok"
    },
    {
      "metric": "cohort_rows",
      "current_value": 41322.0,
      "baseline_value": 41322.0,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "relative",
      "warn_threshold": 0.05,
      "fail_threshold": 0.1,
      "severity": "ok"
    },
    {
      "metric": "first_other_pco2_pct_eq_160_poc",
      "current_value": 0.1367172643,
      "baseline_value": 0.1367172642716365,
      "delta": 2.8363505988338034e-11,
      "abs_delta": 2.8363505988338034e-11,
      "relative_delta": 2.0746104114535267e-10,
      "compare_type": "absolute",
      "warn_threshold": 0.05,
      "fail_threshold": 0.1,
      "severity": "ok"
    },
    {
      "metric": "gas_source_other_rate",
      "current_value": 0.7711144274014472,
      "baseline_value": 0.7711144274014472,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "absolute",
      "warn_threshold": 0.04,
      "fail_threshold": 0.08,
      "severity": "ok"
    },
    {
      "metric": "icu_link_rate",
      "current_value": 0.770908827366285,
      "baseline_value": 0.770908827366285,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "absolute",
      "warn_threshold": 0.04,
      "fail_threshold": 0.08,
      "severity": "ok"
    },
    {
      "metric": "pct_any_gas_0_24h",
      "current_value": 0.9468280427115041,
      "baseline_value": 0.9468280427115041,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "absolute",
      "warn_threshold": 0.04,
      "fail_threshold": 0.08,
      "severity": "ok"
    },
    {
      "metric": "pct_any_gas_0_6h",
      "current_value": 0.37821906556505774,
      "baseline_value": 0.37821906556505774,
      "delta": 0.0,
      "abs_delta": 0.0,
      "relative_delta": 0.0,
      "compare_type": "absolute",
      "warn_threshold": 0.04,
      "fail_threshold": 0.08,
      "severity": "ok"
    }
  ],
  "findings": [
    {
      "severity": "P2",
      "category": "preflight",
      "code": "missing_work_dir_env_key",
      "message": "Optional .env key WORK_DIR is unset; reproducibility manifest will rely on cwd."
    }
  ]
}